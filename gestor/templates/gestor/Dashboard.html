{% extends 'gestor/home.html'%}
{% block content %}

{% block js %}

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"
integrity="sha256-ErZ09KkZnzjpqcane4SCyyHsKAXMvID9/xwbl/Aq1pc=" crossorigin="anonymous"></script>
{% endblock %}
{% if user.is_authenticated %}
<div class="w-100">

    <div id="content">
        <section class="py-3">
            <!-- Espacio entre linea gris y bienvenido-->
            <div class="container">
                <div class="row">
                    <div class="col-lg-9">
                        <h1 class="font-weight-bold mb-0"> Bienvenido {{ user.username}}</h1>
                        <p class="lead text-muted"> Revisa la última información</p>
                        <!-- Botón descargar reporte-->
                    </div>
                    <div class="col-lg-3 d-flex">
                        <button class="btn btn-primary w-100 align-self-center"> Descargar reporte</button>

                    </div>

                </div>
            </div>
        </section>
        <section class="bg-mix">
            <div class="container">
                <div class="card">
                    <div class="row">
                        <!-- Cajas informativas-->
                        <div class="col d-flex stat my-3">
                            <div class="mx-auto">
                                <h6 class="text-muted">Centros de trabajo</h6>
                                <h4 class="font-weight-bold text-center">4</h4>
                            </div>
                        </div>
                        <div class="col d-flex stat my-3">
                            <div class="mx-auto">
                                <a href="{% url 'listado-trabajador'%}">
                                    <h6 class="text-muted">Trabajadores</h6>
                                </a>
                                <!--trabajadores enlazado con la lista -->
                                <h4 class="font-weight-bold text-center">36</h4>
                            </div>
                        </div>
                        <div class="col d-flex stat my-3">
                            <div class="mx-auto">
                                <h6 class="text-muted">Activos</h6>
                                <h4 class="font-weight-bold text-center">14</h4>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section class="bg-grey">
            <div class="container">
                <div class="row">
                    <div class="col-lg-4 my-3">
                        <div class="card-header bg-light">
                            <!-- título del grafico-->
                            <h6 class="font-weight-bold text-center mb-0">Distribución de trabajadores por
                                género</h6>
                        </div>
                        <div class="card-body bg-light">
                            <canvas id="myChart"></canvas>
                        </div>
                    </div>
                    <div class="col-lg-4 my-3">
                        <div class="card-header bg-light">
                            <!-- título del grafico-->
                            <h6 class="font-weight-bold text-center mb-0">Distribución de trabajadores por rango
                                de edad</h6>
                        </div>
                        <div class="card-body bg-light">
                            <canvas id="myChart2"></canvas>
                        </div>
                    </div>
                    <div class="col-lg-4 my-3">
                        <div class="card-header bg-light">
                            <!-- título del grafico-->
                            <h6 class="font-weight-bold text-center mb-0">Ausentismo</h6>
                        </div>
                        <div class="card-body bg-light">
                            <canvas id="myChart3"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </div>

</div>
</div>
<script>
    const data = {
        labels: [
            'Mujeres',
            'Hombres',
        ],
        datasets: [{
            label: 'My First Dataset',
            data: [21, 15,],
            backgroundColor: [
                'rgb(255, 99, 132)',
                'rgb(54, 162, 235)',
            ],
            hoverOffset: 4
        }]
    };
    const config = {
        type: 'pie',
        data: data,
    };
    const myChart = new Chart(
        document.getElementById('myChart'),
        config
    );
</script>
<script>
    const data2 = {
        labels: [
            'Entre 18 y 35',
            'Entre 36 y 50',
            'Entre 51 y 62',
            'Mayores de 62',
        ],
        datasets: [{
            label: 'My First Dataset',
            data: [18, 10, 5, 3],
            backgroundColor: [
                'rgb(2, 172, 102)',
                'rgb(2, 74, 134)',
                'rgb(227, 107, 44)',
                'rgb(239, 40, 15)',
            ],
            hoverOffset: 4
        }]
    };
    const config2 = {
        type: 'pie',
        data: data2,
    };
    const myChart2 = new Chart(
        document.getElementById('myChart2'),
        config2
    );
</script>
<script>
    const labels3 = [
        'Enero',
        'Febrero',
        'Marzo',
        'Abril',
        'Mayo',
        'Junio',
    ];
    const data3 = {
        labels: labels3,
        datasets: [{
            label: 'Ausentismo',
            backgroundColor: 'rgb(255, 99, 132)',
            borderColor: 'rgb(255, 99, 132)',
            data: [0, 10, 5, 2, 20, 30, 45, 50, 60, 80, 100],
        }]
    };

    const config3 = {
        type: 'line',
        data: data3,
        options: {}
    };
    const myChart3 = new Chart(
        document.getElementById('myChart3'),
        config3
    );
</script>


</body>

</html>
{% endif %}
{% endblock %}
