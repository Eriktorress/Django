{% extends 'gestor/home.html'%}

{% block js %}

<script>
    function eliminarTrabajador(id) {
        Swal.fire({
            title: '¿Estas seguro?',
            text: "Esta acción no se puede deshacer!",
            icon: 'warning',
            showCancelButton: true,
            cancelButtontext: '',
            confirmButtonText: 'Si, Eliminar!',
            confirmButtonColor:  '#d33',
            cancelButtonColor:'#3085d6',
        })
        .then(function(result) {
            if (result.isConfirmed) {
                window.location.href = "/Eliminar_trabajador/"+id+"/"
            }
        })

    }

</script>

{% endblock %}



{% block content %}


<h1>Listado de Trabajadores</h1>

<div class="d-grid gap-2 d-md-flex justify-content-md-end">
    <a href="{% url 'form_trab'%}"> <button type="button" class="btn btn-dark">+ Nuevo
            Trabajador</button></a>
</div>
<hr>
<section class="webdesigntuts-workshop">
    <form action="" method="">
        <input type="search" placeholder="Ingrese Busqueda">
        <button class="btn btn-secondary"> Buscar</button>
    </form>
</section>
<br>
<table style="border: 1px solid black;" class="table table-striped table-hover table-responsive-sm">
    <thead class="table-dark">
        <tr>
            <th scope="col">Rut</th>
            <th scope="col">Nombre</th>
            <th scope="col">Apellidos</th>
            <th scope="col">Email</th>
            <th scope="col">Acciones</th>
        </tr>
    </thead>
    <tbody>
        {% for Trabajadores in listado %}
        <tr>
            <th>{{Trabajadores.rut}}</th>
            <td>{{Trabajadores.nombre}} </td>
            <th>{{Trabajadores.apellido}}</th>
            <td>{{Trabajadores.email}}</td>
            <td><a href="{% url 'edit_trab' Trabajadores.id %}" class="btn btn-sm btn-block btn-info">Editar</a></td>
            <td><a href="#" onclick="eliminarTrabajador({{ Trabajadores.id }})" class="btn btn-sm btn-block btn-danger">Eliminar</a></td>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<footer>
    <div class="d-flex justify-content-center">
        <a href="{% url 'Dashboard'%}"> <button type="button" type="button"
                class="btn btn-secondary">Volver</button></a>
    </div>
</footer>

{% endblock %}

</html>